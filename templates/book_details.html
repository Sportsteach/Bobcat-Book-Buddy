{% extends 'base.html' %}

{% block title %}Book Details{% endblock %}

{% block content %}
<br>
<div class="container">


    {% for detail in book_details %}
    {% for key, value in detail.items() %}

    <div class="card pt-3 pb-5" style="background-color: #fdfffb;">
        <div class="container">
            <div class="container">
                <div class="card-header text-center pt-1 pb-0 bg-dark">
                    <h4 class="text-light"><small>
                            <b>Title:</b></small> {{b_title}}</h4>
                </div>
            </div>
            <div class="container pt-2">
                <div class="row">

                    <div class="col-auto">
                        <img class="card-img-top pt-1" src="{{value.image}}" alt="">

                        <div class="text-center">
                            {% if  (value.rating | float) < 1.3 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i> <small> {{value.rating}}</small>
                            {% elif  (value.rating | float) < 1.7 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fadan"></i><i
                                class="fa fa-star-o" style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small>
                                {{value.rating}}</small>
                            {% elif  (value.rating | float) < 2.2 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                            {% elif  (value.rating | float) < 2.7 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fadan"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                            {% elif  (value.rating | float) < 3.2 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fa-star" style="color:orangered;"></i><i
                                class="fa fa-star-o" style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                            {% elif  (value.rating | float) < 3.7 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fa-star" style="color:orangered;"></i><i
                                class="fa fa-star-o" style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                            {% elif  (value.rating | float) < 4.2 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fa-star" style="color:orangered;"></i><i
                                class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                            {% elif  (value.rating | float) < 4.7 %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fa-star" style="color:orangered;"></i><i
                                class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star-o"
                                style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                            {% else %}
                            <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><i class="fa fa-star" style="color:orangered;"></i><i
                                class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                style="color:orangered;"></i><small> {{value.rating}}</small>
                            {% endif %}
                        </div>
                        <div class="text-center">
                            <small>
                                <p class="card-title text-center"> <b>Author:</b> {{value.author}} </p>
                            </small>
                            <p style="visibility:hidden;">hiddenmakepicturelarger</p>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card-block px-2 ">

                            <p class="card-text"><b>Summary:</b>
                                {{b_description}}
                            </p>
                            <div class="text-center">
                                {% if the_title %}
                                <div class="alert alert-success text-dark" role="alert">
                                    <h5><b>"{{b_title}}"</b> is avalible at Margaret Brent!
                                    </h5>
                                </div>
                                {% else %}
                                <div class="alert alert-dark" role="alert">

                                    "<b>{{b_title}}</b>" is not availible at Margaret Brent. <br>
                                    <a href="https://librarypoint.bibliocommons.com/v2/search?query={{b_title}}&searchType=smart&_ga=2.189890344.2017662317.1599236422-1539494952.1599236422"
                                        target="_blank" class="btn-sm btn-primary">Check Public Library</a>
                                    <br>
                                    <br>
                                    {% if the_book %}
                                    "<b>{{b_title}}</b>" has been suggested, thumbs up if you agree.
                                    {% with messages = get_flashed_messages() %}
                                    {% if messages %}

                                    {% for message in messages %}
                                    <div class="alert alert-success" role="alert">{{ message }}</div>

                                    {% endfor %}

                                    {% endif %}
                                    {% endwith %}
                                    <form method="POST">
                                        <input style="display: none;" name="id" value="{{the_book.gb_num}}">
                                        <input style="display: none;" name="title" value="{{the_book.title}}">
                                        <input style="display: none;" name="author" value="{{the_book.author}}">
                                        <input style="display: none;" name="thumbs_up"
                                            value="{{the_book.thumbs_up +1}}">
                                        <input style="display: none;" name="isbn" value="{{the_book.isbn}}">
                                        <button class="btn btn-primary btn-sm" formaction="/{{the_book.id}}/edit"
                                            formmethod="POST">Give Thumbs Up&#x1F44D;</button>

                                    </form>

                                    {% else %}
                                    Click to suggest " <b>{{b_title}}</b>" at Margaret Brent.
                                    <br>
                                    <form action="/book_details/{{value.id}}" method="POST">
                                        <input style="display: none;" name="id" value="{{value.id}}">
                                        <input style="display: none;" name="title" value="{{value.title}}">
                                        <input style="display: none;" name="author" value="{{value.author}}">
                                        <input style="display: none;" name="thumbs_up" value="1">
                                        <input style="display: none;" name="isbn" value="{{value.isbn}}">
                                        <button class="btn btn-primary btn-sm">Submit New Book</button>
                                    </form>

                                </div>
                                {% endif %}
                            </div>
                            {% endif %}
                            <hr>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% endfor %}

    {% endfor %}
</div>

<div class="container">
    <br>
    <div class="container" style="background-color:  #e5f0cb;">
        <h2 class="display-5 text-center pt-3">Recommended Reads</h2>
        <div class="row">

            {% for book in similar_books %}

            <div class="col-3">
                <div class="row mt-3">
                    {% for key, value in book.items() %}
                    <div class="container">
                        <div class="card flex-row flex-wrap">

                            <div class="container pt-2 pb-2">
                                <div class="container text-center">
                                    <img src="{{value.image}}" alt="" width="90" height="120">
                                </div>
                                <div class="card-block pt-0">
                                    <div class="text-center">
                                        {% if  (value.rating | float) < 1.3 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i> <small> {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 1.7 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fadan"></i><i
                                            class="fa fa-star-o" style="color:lightslategrey;"></i><i
                                            class="fa fa-star-o" style="color:lightslategrey;"></i><i
                                            class="fa fa-star-o" style="color:lightslategrey;"></i><small>
                                            {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 2.2 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 2.7 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fadan"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 3.2 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 3.7 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 4.2 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                                        {% elif  (value.rating | float) < 4.7 %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star-o"
                                            style="color:lightslategrey;"></i><small> {{value.rating}}</small>
                                        {% else %}
                                        <i class="fa fa-star" style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><i class="fa fa-star"
                                            style="color:orangered;"></i><small> {{value.rating}}</small>
                                        {% endif %}
                                    </div>

                                    <h6 class="card-title"><small><b>Title:</b> {{value.title}}</small></h6>
                                    <h6 class="card-title"><small><b>Author:</b> {{value.author}}</small></h6>
                                    <a href="/book_details/{{value.id}}" class="btn-sm btn-primary">Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}